<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://lmatt-bit.github.io/blog/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="http://lmatt-bit.github.io/blog/theme/stylesheet/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="http://lmatt-bit.github.io/blog/theme/stylesheet/font-awesome.min.css">





  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

<meta name="author" content="lmatt wang" />
<meta name="description" content="最近写了一个程序，需要在数据写入文件后立即读取该文件内容。这一简单的功能，却会时不时抛异常，令我十分不解。 原程序如下：\ FileOutputStream os = new FileOutputStream("some_file");\ os.write(data);\ os.close(); 在查了jdk中关于flush()函数的介绍后，发现了一些问题。flush只保证数据已交付给了操作系统，无法确定已写入硬盘。 以下是jdk中关于flush()函数的介绍：\ Flushes this output stream and forces any buffered output bytes to be written out. The general contract of flush is that calling it is an indication that ..." />
<meta name="keywords" content="">
<meta property="og:site_name" content="do not know"/>
<meta property="og:title" content="确保FileOutputStream将内容写入硬盘"/>
<meta property="og:description" content="最近写了一个程序，需要在数据写入文件后立即读取该文件内容。这一简单的功能，却会时不时抛异常，令我十分不解。 原程序如下：\ FileOutputStream os = new FileOutputStream("some_file");\ os.write(data);\ os.close(); 在查了jdk中关于flush()函数的介绍后，发现了一些问题。flush只保证数据已交付给了操作系统，无法确定已写入硬盘。 以下是jdk中关于flush()函数的介绍：\ Flushes this output stream and forces any buffered output bytes to be written out. The general contract of flush is that calling it is an indication that ..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://lmatt-bit.github.io/blog/quebaoFileOutputStreamjiangneirongxieruyingpan.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2010-10-14 12:51:00+08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://lmatt-bit.github.io/blog/author/lmatt-wang.html">
<meta property="article:section" content="misc"/>
<meta property="og:image" content="">
  <title>do not know &ndash; 确保FileOutputStream将内容写入硬盘</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://lmatt-bit.github.io/blog">
        <img src="http://lmatt-bit.github.io/blog/theme/img/profile.png" alt="" title="">
      </a>
      <h1><a href="http://lmatt-bit.github.io/blog"></a></h1>
      <p></p>
      <nav>
        <ul class="list">
          <li><a href="http://lmatt-bit.github.io/blog/pages/guanyuwo(About-Me).html#guanyuwo(About-Me)">关于我(About Me)</a></li>
          <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
          <li><a href="http://python.org/" target="_blank">Python.org</a></li>
          <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-social link" href="#" target="_blank"><i class="fa fa-social link"></i></a></li>
        <li><a class="sc-Another social link" href="#" target="_blank"><i class="fa fa-Another social link"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>

<article>
  <header>
    <h1 id="quebaoFileOutputStreamjiangneirongxieruyingpan">确保FileOutputStream将内容写入硬盘</h1>
    <p>Posted on Thu 14 October 2010 in <a href="http://lmatt-bit.github.io/blog/category/misc.html">misc</a></p>
  </header>
  <div>
    <p>最近写了一个程序，需要在数据写入文件后立即读取该文件内容。这一简单的功能，却会时不时抛异常，令我十分不解。</p>
<p>原程序如下：\</p>
<blockquote>
<p>FileOutputStream os = new FileOutputStream("some_file");\
os.write(data);\
os.close();
</p></p>
</blockquote>
<p>在查了jdk中关于flush()函数的介绍后，发现了一些问题。flush只保证数据已交付给了操作系统，无法确定已写入硬盘。</p>
<p>以下是jdk中关于flush()函数的介绍：\</p>
<blockquote>
<p>Flushes this output stream and forces any buffered output bytes to be
written out. The general contract of <code>flush</code> is that calling it is an
indication that, if any bytes previously written have been buffered by
the implementation of the output stream, such bytes should immediately
be written to their intended destination.
</p></p>
</blockquote>
<p>在查看了一些资料后，找到如下的解决方法。\</p>
<blockquote>
<p>//在flush();后加上下面代码\
FileDescriptor fd = os.getFD();\
fd.sync();//Force all system buffers to synchronize with the
underlying device.
</p></p>
</blockquote>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'lmattbit';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</article>

    <footer>
        <p>&copy; lmatt </p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "name": "确保FileOutputStream将内容写入硬盘",
  "headline": "确保FileOutputStream将内容写入硬盘",
  "datePublished": "2010-10-14 12:51:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "lmatt wang",
    "url": "http://lmatt-bit.github.io/blog/author/lmatt-wang.html"
  },
  "image": "{{ SITEURL }}/{{ THEME_STATIC_DIR }}/img/profile.png",
  "url": "http://lmatt-bit.github.io/blog/quebaoFileOutputStreamjiangneirongxieruyingpan.html",
  "description": "最近写了一个程序，需要在数据写入文件后立即读取该文件内容。这一简单的功能，却会时不时抛异常，令我十分不解。 原程序如下：\ FileOutputStream os = new FileOutputStream("some_file");\ os.write(data);\ os.close(); 在查了jdk中关于flush()函数的介绍后，发现了一些问题。flush只保证数据已交付给了操作系统，无法确定已写入硬盘。 以下是jdk中关于flush()函数的介绍：\ Flushes this output stream and forces any buffered output bytes to be written out. The general contract of flush is that calling it is an indication that ..."
}
</script></body>
</html>